<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans 
       http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">

    
    <!-- ************************************************* -->
    <!-- PLAN_NIOKR -->
    <!-- ************************************************* -->
    <bean id="BUILDER_PLAN_FACT_NIOKR__DEP_EX_PLAN_ID"
          class="pst.arm.client.modules.datagrid.domain.DColumnBuilderNumber" lazy-init="false">
        <property name="columns">
            <map>
                <entry>
                    <key>
                        <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                            <property name="columnName" value="DEP_EX_PLAN_ID"/>
                            <property name="tableAlias" value="MAIN"/>
                        </bean>
                    </key>
                    <bean class="pst.arm.client.modules.datagrid.domain.DColumn">
                        <property name="name" value="DEP_EX_PLAN_ID"/>
                        <property name="caption" value="Код"/>
                        <property name="isKey" value="TRUE"/>
                        <property name="isAutoincrement" value="TRUE"/>
                        <property name="columnProperty" ref="DCPIntegerNotNegative"/>
                        <property name="isVisible" value="false"/>
                        <property name="isVisibleEdit" value="false"/>
                        <property name="isFiltr" value="false"/>
                        <property name="isInserted" value="false"/>
                        <property name="isEditable" value="false"/>
                        <property name="isEditableAdd" value="false"/>

                    </bean>
                </entry>
            </map>
        </property>
    </bean>

    <bean id="BUILDER_PLAN_FACT_NIOKR__DEP_EX_PLAN_ID_FILTR"
          class="pst.arm.client.modules.datagrid.domain.DColumnBuilderNumber" lazy-init="false">
        <property name="columns">
            <map>
                <entry>
                    <key>
                        <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                            <property name="columnName" value="DEP_EX_PLAN_ID"/>
                            <property name="tableAlias" value="MAIN"/>
                        </bean>
                    </key>
                    <bean class="pst.arm.client.modules.datagrid.domain.DColumn">
                        <property name="name" value="DEP_EX_PLAN_ID"/>
                        <property name="caption" value="Код"/>
                        <property name="isKey" value="TRUE"/>
                        <property name="isAutoincrement" value="TRUE"/>
                        <property name="columnProperty" ref="DCPIntegerNotNegative"/>
                        <property name="isVisible" value="false"/>
                        <property name="isVisibleEdit" value="false"/>
                        <property name="isFiltr" value="true"/>
                        <property name="isInserted" value="false"/>
                        <property name="isEditable" value="false"/>
                        <property name="isEditableAdd" value="false"/>

                    </bean>
                </entry>
            </map>
        </property>
    </bean>

 <bean id="BUILDER_PLAN_FACT_NIOKR__DEPART_ID" class="pst.arm.client.modules.datagrid.domain.DColumnBuilderNumber" lazy-init="false">
        <property name="columns">
            <map>
                <entry>
                    <key>
                        <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                            <property name="columnName" value="DEPART_ID"/>
                            <property name="tableAlias" value="MAIN"/>
                        </bean>
                    </key>
                    <bean class="pst.arm.client.modules.datagrid.domain.DColumn">
                        <property name="name" value="DEPART_ID"/>
                        <property name="caption" value="Код подразделения"/>
                        <property name="isKey" value="false"/>
                        <property name="columnProperty" ref="DCPIntegerNotNegative"/>
                        <property name="isVisible" value="false"/>
                        <property name="isVisibleEdit" value="false"/>
                        <property name="isFiltr" value="false"/>
                        <property name="isInserted" value="false"/>
                        <property name="isEditable" value="false"/>
                        <property name="isEditableAdd" value="false"/>                        
                    </bean>
                </entry>
            </map>
        </property>
    </bean>
        

     <bean id="BUILDER_PLAN_FACT_NIOKR__WORK_END_DATE" class="pst.arm.client.modules.datagrid.domain.DColumnBuilderDate"
          lazy-init="false">
        <property name="columns">
            <map>
                <entry>
                    <key>
                        <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                            <property name="columnName" value="END_DATE"/>
                            <property name="tableAlias" value="WORK_PLAN"/>
                        </bean>
                    </key>
                    <bean class="pst.arm.client.modules.datagrid.domain.DColumn">
                        <property name="name" value="END_DATE"/>
                        <property name="caption" value="Срок выполнения по договору"/>
                        <property name="columnProperty" ref="DCPDateShort"/>
                        <property name="isVisible" value="true"/>
                        <property name="isVisibleEdit" value="true"/>
                        <property name="isEditable" value="false"/>
                        <property name="isEditableAdd" value="false"/>
                        <property name="isFiltr" value="false"/>
                    </bean>
                </entry>
            </map>
        </property>
    </bean>

    <bean id="BUILDER_PLAN_FACT_NIOKR__ALL_FACT_DATE" class="pst.arm.client.modules.datagrid.domain.DColumnBuilderDate"
          lazy-init="false">
        <property name="columns">
            <map>
                <entry>
                    <key>
                        <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                            <property name="columnName" value="ALL_FACT_DATE"/>
                            <property name="tableAlias" value="MAIN"/>
                        </bean>
                    </key>
                    <bean class="pst.arm.client.modules.datagrid.domain.DColumn">
                        <property name="name" value="ALL_FACT_DATE"/>
                        <property name="caption" value="Срок выполнения фактический"/>
                        <property name="columnProperty" ref="DCPDateShort"/>
                    </bean>
                </entry>
            </map>
        </property>
    </bean>

    <bean id="BUILDER_PLAN_FACT_NIOKR__ALL_FACT_DATE_NOFILTR" class="pst.arm.client.modules.datagrid.domain.DColumnBuilderDate"
          lazy-init="false">
        <property name="columns">
            <map>
                <entry>
                    <key>
                        <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                            <property name="columnName" value="ALL_FACT_DATE"/>
                            <property name="tableAlias" value="MAIN"/>
                        </bean>
                    </key>
                    <bean class="pst.arm.client.modules.datagrid.domain.DColumn">
                        <property name="name" value="ALL_FACT_DATE"/>
                        <property name="caption" value="Срок выполнения фактический"/>
                        <property name="columnProperty" ref="DCPDateShort"/>
                        <property name="isFiltr" value="false"/>
                    </bean>
                </entry>
            </map>
        </property>
    </bean>
    
    <bean id="BUILDER_PLAN_FACT_NIOKR__END_DATE" class="pst.arm.client.modules.datagrid.domain.DColumnBuilderDate"
          lazy-init="false">
        <property name="columns">
            <map>
                <entry>
                    <key>
                        <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                            <property name="columnName" value="END_DATE"/>
                            <property name="tableAlias" value="MAIN"/>
                        </bean>
                    </key>
                    <bean class="pst.arm.client.modules.datagrid.domain.DColumn">
                        <property name="name" value="END_DATE"/>
                        <property name="caption" value="Срок выполнения планируемый"/>
                        <property name="columnProperty" ref="DCPDateShort"/>
                        <property name="isVisible" value="true"/>
                        <property name="isVisibleEdit" value="true"/>
                        <property name="isEditable" value="false"/>
                        <property name="isEditableAdd" value="false"/>
                        <property name="isFiltr" value="false"/>
                    </bean>
                </entry>
            </map>
        </property>
    </bean>

    <bean id="BUILDER_PLAN_FACT_NIOKR__BEG_DATE" class="pst.arm.client.modules.datagrid.domain.DColumnBuilderDate"
          lazy-init="false">
        <property name="columns">
            <map>
                <entry>
                    <key>
                        <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                            <property name="columnName" value="BEG_DATE"/>
                            <property name="tableAlias" value="MAIN"/>
                        </bean>
                    </key>
                    <bean class="pst.arm.client.modules.datagrid.domain.DColumn">
                        <property name="name" value="BEG_DATE"/>
                        <property name="caption" value="Плановая дата начала"/>
                        <property name="columnProperty" ref="DCPDateShort"/>
                        <property name="isVisible" value="false"/>
                        <property name="isFiltr" value="false"/>
                    </bean>
                </entry>
            </map>
        </property>
    </bean>

    <bean id="BUILDER_PLAN_FACT_NIOKR__BEG_DATE_FROM" class="pst.arm.client.modules.datagrid.domain.DColumnBuilderDateFrom"
          lazy-init="false">
        <property name="columns">
            <map>
                <entry>
                    <key>
                        <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                            <property name="columnName" value="BEG_DATE_FROM"/>
                            <property name="tableAlias" value="MAIN"/>
                        </bean>
                    </key>
                    <bean class="pst.arm.client.modules.datagrid.domain.DColumn">
                        <property name="name" value="BEG_DATE"/>
                        <property name="caption" value="Плановая дата начала от"/>
                        <property name="columnProperty" ref="DCPDateShortCurrentYearStart"/>
                        <property name="isVisible" value="false"/>
                        <property name="isFiltr" value="true"/>
                        <property name="isInserted" value="false"/>
                        <property name="isHidden" value="true"/>
                        <property name="isAlwaysUpdated" value="false"/>
                    </bean>
                </entry>
            </map>
        </property>
    </bean>

    <bean id="BUILDER_PLAN_FACT_NIOKR__BEG_DATE_TO" class="pst.arm.client.modules.datagrid.domain.DColumnBuilderDateTo"
          lazy-init="false">
        <property name="columns">
            <map>
                <entry>
                    <key>
                        <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                            <property name="columnName" value="BEG_DATE_TO"/>
                            <property name="tableAlias" value="MAIN"/>
                        </bean>
                    </key>
                    <bean class="pst.arm.client.modules.datagrid.domain.DColumn">
                        <property name="name" value="BEG_DATE"/>
                        <property name="caption" value="Плановая дата начала до"/>
                        <property name="columnProperty" ref="DCPDateShortCurrentYearEnd"/>
                        <property name="isVisible" value="false"/>
                        <property name="isFiltr" value="true"/>
                        <property name="isInserted" value="false"/>
                        <property name="isHidden" value="true"/>
                        <property name="isAlwaysUpdated" value="false"/>
                    </bean>
                </entry>
            </map>
        </property>
    </bean>
     
    
     <bean id="BUILDER_PLAN_FACT_NIOKR__CIPHER" class="pst.arm.client.modules.datagrid.domain.DColumnBuilderString" lazy-init="false">
        <property name="columns">
            <map>
                <entry>
                    <key>
                        <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                            <property name="columnName" value="CIPHER"/>
                            <property name="tableAlias" value="CONTRACT"/>
                        </bean>
                    </key>
                    <bean class="pst.arm.client.modules.datagrid.domain.DColumn">
                        <property name="name" value="CIPHER"/>
                        <property name="caption" value="Шифр"/>
                        <property name="columnProperty" ref="DCPString50"/>
                        <property name="isFiltr" value="false"/>
                        <property name="isVisible" value="false"/>
                    </bean>
                </entry>
            </map>
        </property>
    </bean>

    <bean id="BUILDER_PLAN_FACT_NIOKR__CIPHER_FILTER" class="pst.arm.client.modules.datagrid.domain.DColumnBuilderString" lazy-init="false">
        <property name="columns">
            <map>
                <entry>
                    <key>
                        <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                            <property name="columnName" value="CIPHER"/>
                            <property name="tableAlias" value="CONTRACT"/>
                        </bean>
                    </key>
                    <bean class="pst.arm.client.modules.datagrid.domain.DColumn">
                        <property name="name" value="CIPHER"/>
                        <property name="caption" value="Шифр"/>
                        <property name="columnProperty" ref="DCPString50"/>
                        <property name="isFiltr" value="true"/>
                    </bean>
                </entry>
            </map>
        </property>
    </bean>
    
    <bean id="BUILDER_PLAN_FACT_NIOKR__WORK_NAME" class="pst.arm.client.modules.datagrid.domain.DColumnBuilderString" lazy-init="false">
        <property name="columns">
            <map>
                <entry>
                    <key>
                        <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                            <property name="columnName" value="WORK_NAME"/>
                            <property name="tableAlias" value="MAIN"/>
                        </bean>
                    </key>
                    <bean class="pst.arm.client.modules.datagrid.domain.DColumn">
                        <property name="name" value="WORK_NAME"/>
                        <property name="caption" value="Тема"/>
                        <property name="columnProperty" ref="DCPString255"/>
                        <property name="isFiltr" value="true"/>
                        <property name="isVisible" value="false"/>
                    </bean>
                </entry>
            </map>
        </property>
    </bean>
    
    <bean id="BUILDER_PLAN_FACT_NIOKR__STAGE_NUMBER" class="pst.arm.client.modules.datagrid.domain.DColumnBuilderString" lazy-init="false">
        <property name="columns">
            <map>
                <entry>
                    <key>
                        <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                            <property name="columnName" value="STAGE_NUMBER"/>
                            <property name="tableAlias" value="MAIN"/>
                        </bean>
                    </key>
                    <bean class="pst.arm.client.modules.datagrid.domain.DColumn">
                        <property name="name" value="STAGE_NUMBER"/>
                        <property name="caption" value="Этап"/>
                        <property name="isFiltr" value="false"/>
                        <property name="columnProperty" ref="DCPString40"/>
                        <property name="isVisible" value="false"/>
                        <property name="isVisibleEdit" value="false"/>
                    </bean>
                </entry>
            </map>
        </property>
    </bean>
    
    <bean id="BUILDER_PLAN_FACT_NIOKR__STAGE_NUMBER_HLV" class="pst.arm.client.modules.datagrid.domain.DColumnBuilderString" lazy-init="false">
        <property name="columns">
            <map>
                <entry>
                    <key>
                        <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                            <property name="columnName" value="STAGE_NUMBER"/>
                            <property name="tableAlias" value="MAIN"/>
                        </bean>
                    </key>
                    <bean class="pst.arm.client.modules.datagrid.domain.DColumn">
                        <property name="name" value="STAGE_NUMBER"/>
                        <property name="caption" value="Этап"/>
                        <property name="isFiltr" value="true"/>
                        <property name="columnProperty" ref="DCPString40_100"/>
                        <property name="isVisible" value="true"/>
                        <property name="isVisibleEdit" value="false"/>
                    </bean>
                </entry>
            </map>
        </property>
    </bean>
        
    <bean id="BUILDER_PLAN_FACT_NIOKR__WORK_NUMBER" class="pst.arm.client.modules.datagrid.domain.DColumnBuilderString" lazy-init="false">
        <property name="columns">
            <map>
                <entry>
                    <key>
                        <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                            <property name="columnName" value="WORK_NUMBER"/>
                            <property name="tableAlias" value="WORK_PLAN"/>
                        </bean>
                    </key>
                    <bean class="pst.arm.client.modules.datagrid.domain.DColumn">
                        <property name="name" value="WORK_NUMBER"/>
                        <property name="caption" value="Номер меропр."/>
                        <property name="columnProperty" ref="DCPString10_ocp"/>
                        <property name="isFiltr" value="true"/>
                    </bean>
                </entry>
            </map>
        </property>
    </bean>
    
   
   
    <bean id="BUILDER_PLAN_FACT_NIOKR__ORDER_D_WORK_NAME" class="pst.arm.client.modules.datagrid.domain.DColumnBuilderString" lazy-init="false">
        <property name="columns">
            <map>
                <entry>
                    <key>
                        <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                            <property name="columnName" value="WORK_NAME"/>
                            <property name="tableAlias" value="ORDER_D"/>
                        </bean>
                    </key>
                    <bean class="pst.arm.client.modules.datagrid.domain.DColumn">
                        <property name="name" value="WORK_NAME"/>
                        <property name="caption" value="Тема (наименование)"/>
                        <property name="columnProperty" ref="DCPString255"/>
                        <property name="isFiltr" value="false"/>
                        <property name="isVisible" value="false"/>
                        <property name="isVisibleEdit" value="false"/>
                    </bean>
                </entry>
            </map>
        </property>
    </bean>
    
    <bean id="BUILDER_PLAN_FACT_NIOKR__WORK_NUMBER_NOFILTR" class="pst.arm.client.modules.datagrid.domain.DColumnBuilderString" lazy-init="false">
        <property name="columns">
            <map>
                <entry>
                    <key>
                        <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                            <property name="columnName" value="WORK_NUMBER"/>
                            <property name="tableAlias" value="WORK_PLAN"/>
                        </bean>
                    </key>
                    <bean class="pst.arm.client.modules.datagrid.domain.DColumn">
                        <property name="name" value="WORK_NUMBER"/>
                        <property name="caption" value="Номер меропр."/>
                        <property name="columnProperty" ref="DCPString10_ocp"/>
                        <property name="isFiltr" value="false"/>
                    </bean>
                </entry>
            </map>
        </property>
    </bean>

    <bean id="BUILDER_PLAN_FACT_NIOKR__ORDER_NUMBER" class="pst.arm.client.modules.datagrid.domain.DColumnBuilderString" lazy-init="false">
        <property name="columns">
            <map>
                <entry>
                    <key>
                        <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                            <property name="columnName" value="ORDER_NUMBER"/>
                            <property name="tableAlias" value="ORDER_D"/>
                        </bean>
                    </key>
                    <bean class="pst.arm.client.modules.datagrid.domain.DColumn">
                        <property name="name" value="ORDER_NUMBER"/>
                        <property name="caption" value="Номер заказа"/>
                        <property name="columnProperty" ref="DCPString22"/>
                        <property name="isFiltr" value="true"/>
                    </bean>
                </entry>
            </map>
        </property>
    </bean>

    <bean id="BUILDER_PLAN_FACT_NIOKR__ORDER_NUMBER_FILTR" class="pst.arm.client.modules.datagrid.domain.DColumnBuilderString" lazy-init="false">
        <property name="columns">
            <map>
                <entry>
                    <key>
                        <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                            <property name="columnName" value="ORDER_NUMBER_F"/>
                            <property name="tableAlias" value="ORDER_D"/>
                        </bean>
                    </key>
                    <bean class="pst.arm.client.modules.datagrid.domain.DColumn">
                        <property name="name" value="ORDER_NUMBER"/>
                        <property name="caption" value="Номер заказа"/>
                        <property name="columnProperty" ref="DCPString22"/>
                        <property name="isFiltr" value="true"/>
                        <property name="isVisible" value="false"/>
                        <property name="isHidden" value="true"/>
                        <property name="isInserted" value="false"/>
                    </bean>
                </entry>
            </map>
        </property>
    </bean>


    <bean id="BUILDER_PLAN_FACT_NIOKR__ORDER_NUMBER_NOFILTR" class="pst.arm.client.modules.datagrid.domain.DColumnBuilderString" lazy-init="false">
        <property name="columns">
            <map>
                <entry>
                    <key>
                        <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                            <property name="columnName" value="ORDER_NUMBER"/>
                            <property name="tableAlias" value="ORDER_D"/>
                        </bean>
                    </key>
                    <bean class="pst.arm.client.modules.datagrid.domain.DColumn">
                        <property name="name" value="ORDER_NUMBER"/>
                        <property name="caption" value="Номер заказа"/>
                        <property name="columnProperty" ref="DCPString22"/>
                        <property name="isFiltr" value="false"/>
                    </bean>
                </entry>
            </map>
        </property>
    </bean>

    <bean id="BUILDER_PLAN_FACT_NIOKR__CODE" class="pst.arm.client.modules.datagrid.domain.DColumnBuilderString" lazy-init="false">
        <property name="columns">
            <map>
                <entry>
                    <key>
                        <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                            <property name="columnName" value="CODE"/>
                            <property name="tableAlias" value="DEPART"/>
                        </bean>
                    </key>
                    <bean class="pst.arm.client.modules.datagrid.domain.DColumn">
                        <property name="name" value="CODE"/>
                        <property name="caption" value="Головное подразделение"/>
                        <property name="columnProperty" ref="DCPString11"/>
                        <property name="isFiltr" value="false"/>                        
                    </bean>
                </entry>
            </map>
        </property>
    </bean>    
             
     <bean id="BUILDER_PLAN_FACT_NIOKR__DESCRIPTION" class="pst.arm.client.modules.datagrid.domain.DColumnBuilderString"
          lazy-init="false">
        <property name="columns">
            <map>
                <entry>
                    <key>
                        <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                            <property name="columnName" value="DESCRIPTION"/>
                            <property name="tableAlias" value="MAIN"/>
                        </bean>
                    </key>
                    <bean class="pst.arm.client.modules.datagrid.domain.DColumn">
                        <property name="name" value="DESCRIPTION"/>
                        <property name="caption" value="Краткое содержание работ"/>
                        <property name="columnProperty" ref="DCPTextArea255"/>
                        <property name="isVisible" value="true"/>
                        <property name="isEditable" value="true"/>
                        <property name="isVisibleEdit" value="true"/>
                        <property name="isFiltr" value="true"/>
                    </bean>
                </entry>
            </map>
        </property>
    </bean>
    
     <bean id="BUILDER_PLAN_FACT_NIOKR__MONTH_NUM" class="pst.arm.client.modules.datagrid.domain.DColumnBuilderNumber"
          lazy-init="false">
        <property name="columns">
            <map>
                <entry>
                    <key>
                        <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                            <property name="columnName" value="MONTH_NUM"/>
                            <property name="tableAlias" value="MAIN"/>
                        </bean>
                    </key>
                    <bean class="pst.arm.client.modules.datagrid.domain.DColumn">
                        <property name="name" value="END_DATE"/>
                        <property name="sqlForColumn" value="MONTH(MAIN.END_DATE)"/>                        
                        <property name="caption" value="Месяц"/>
                        <property name="columnProperty" ref="DCPIntegerNotNegative"/>
                        <property name="isVisible" value="false"/>
                        <property name="isVisibleEdit" value="false"/>
                        <property name="isFiltr" value="false"/>
                        <property name="isInserted" value="false"/>
                        <property name="isEditable" value="false"/>
                        <property name="isEditableAdd" value="false"/>
                    </bean>
                </entry>
            </map>
        </property>
    </bean>
    
     <!--<bean id="BUILDER_PLAN_FACT_NIOKR__CONTRACT_DATE_CORR" class="pst.arm.client.modules.datagrid.domain.expansion.DColumnBuilderDateCorrForPlanFactNiokr"
          lazy-init="false">-->
          <bean id="BUILDER_PLAN_FACT_NIOKR__CONTRACT_DATE_CORR" class="pst.arm.client.modules.datagrid.domain.DColumnBuilderDate"
          lazy-init="false">
        <property name="columns">
            <map>
                <entry>
                    <key>
                        <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                            <property name="columnName" value="DATE_CORR"/>
                            <property name="tableAlias" value="MAIN"/>
                        </bean>
                    </key>
                    <bean class="pst.arm.client.modules.datagrid.domain.DColumn">
                        <property name="name" value="DATE_CORR"/>
                        <property name="caption" value="Дата корректировки"/>
                        <property name="columnProperty" ref="DCPDateTimeCurrent"/>
                        <property name="isVisible" value="false"/>
                        <property name="isVisibleEdit" value="false"/>
                        <property name="isFiltr" value="false"/>
                        <property name="isInserted" value="false"/>
                        <property name="isEditable" value="false"/>
                        <property name="isEditableAdd" value="false"/>
                    </bean>
                </entry>
            </map>
        </property>
    </bean>
    
    <bean id="BUILDER_PLAN_FACT_NIOKR__YEAR_NUM" class="pst.arm.client.modules.datagrid.domain.DColumnBuilderNumber"
          lazy-init="false">
        <property name="columns">
            <map>
                <entry>
                    <key>
                        <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                            <property name="columnName" value="YEAR_NUM"/>
                            <property name="tableAlias" value="MAIN"/>
                        </bean>
                    </key>
                    <bean class="pst.arm.client.modules.datagrid.domain.DColumn">
                        <property name="name" value="END_DATE"/>
                        <property name="sqlForColumn" value="YEAR(MAIN.END_DATE)"/>                        
                        <property name="caption" value="Год"/>
                        <property name="columnProperty" ref="DCPIntegerNotNegative"/>
                        <property name="isVisible" value="false"/>
                        <property name="isVisibleEdit" value="false"/>
                        <property name="isFiltr" value="false"/>
                        <property name="isInserted" value="false"/>
                        <property name="isEditable" value="false"/>
                        <property name="isEditableAdd" value="false"/>
                    </bean>
                </entry>
            </map>
        </property>
    </bean>

<bean id="BUILDER_PLAN_FACT_NIOKR__PLAN_LABOUR" class="pst.arm.client.modules.datagrid.domain.DColumnBuilderNumber"
          lazy-init="false">
        <property name="columns">
            <map>
                <entry>
                    <key>
                        <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                            <property name="columnName" value="PLAN_LABOUR"/>
                            <property name="tableAlias" value="MAIN"/>
                        </bean>
                    </key>
                    <bean class="pst.arm.client.modules.datagrid.domain.DColumn">
                        <property name="name" value="PLAN_LABOUR"/>
                        <property name="caption" value="Утвержденный план, чел/мес."/>
                        <property name="isNotNull" value="FALSE"/>
                        <property name="columnProperty" ref="DCPDecimalNotNegative12_2_maxmin"/>
                        <property name="isVisible" value="TRUE"/>
                        <property name="isVisibleEdit" value="TRUE"/>
                        <property name="isFiltr" value="FALSE"/>
                    </bean>
                </entry>
            </map>
        </property>
    </bean>
    
    <bean id="BUILDER_PLAN_FACT_NIOKR__PLAN_LABOUR_DOP" class="pst.arm.client.modules.datagrid.domain.DColumnBuilderNumber"
          lazy-init="false">
        <property name="columns">
            <map>
                <entry>
                    <key>
                        <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                            <property name="columnName" value="PLAN_LABOUR_DOP"/>
                            <property name="tableAlias" value="WORK_PLAN"/>
                        </bean>
                    </key>
                    <bean class="pst.arm.client.modules.datagrid.domain.DColumn">
                        <property name="name" value="PLAN_LABOUR"/>
                        <property name="caption" value="PLAN_LABOUR_DOP"/>
                        <property name="isNotNull" value="FALSE"/>
                        <property name="columnProperty" ref="DCPDecimalNotNegative12_2_maxmin"/>
                        <property name="isVisible" value="FALSE"/>
                        <property name="isVisibleEdit" value="FALSE"/>
                        <property name="isFiltr" value="FALSE"/>
                        <property name="isHidden" value="TRUE"/>
                    </bean>
                </entry>
            </map>
        </property>
    </bean>
    
    <bean id="BUILDER_PLAN_FACT_NIOKR__PLAN_COST" class="pst.arm.client.modules.datagrid.domain.DColumnBuilderNumber"
          lazy-init="false">
        <property name="columns">
            <map>
                <entry>
                    <key>
                        <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                            <property name="columnName" value="PLAN_COST"/>
                            <property name="tableAlias" value="MAIN"/>
                        </bean>
                    </key>
                    <bean class="pst.arm.client.modules.datagrid.domain.DColumn">
                        <property name="name" value="PLAN_COST"/>
                        <property name="caption" value="Утвержденный план, руб."/>
                        <property name="isNotNull" value="FALSE"/>
                        <property name="columnProperty" ref="DCPDecimalNotNegative38_4_00"/>
                        <property name="isVisible" value="TRUE"/>
                        <property name="isVisibleEdit" value="TRUE"/>
                        <property name="isFiltr" value="FALSE"/>
                    </bean>
                </entry>
            </map>
        </property>
    </bean>
    
     <bean id="BUILDER_PLAN_FACT_NIOKR__PLAN_COST_DOP" class="pst.arm.client.modules.datagrid.domain.DColumnBuilderNumber"
          lazy-init="false">
        <property name="columns">
            <map>
                <entry>
                    <key>
                        <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                            <property name="columnName" value="PLAN_COST_DOP"/>
                            <property name="tableAlias" value="WORK_PLAN"/>
                        </bean>
                    </key>
                    <bean class="pst.arm.client.modules.datagrid.domain.DColumn">
                        <property name="name" value="PLAN_COST"/>
                        <property name="caption" value="PLAN_COST_DOP"/>
                        <property name="isNotNull" value="FALSE"/>
                        <property name="columnProperty" ref="DCPDecimalNotNegative38_4_00"/>
                        <property name="isVisible" value="FALSE"/>
                        <property name="isVisibleEdit" value="FALSE"/>
                        <property name="isFiltr" value="FALSE"/>
                        <property name="isHidden" value="TRUE"/>
                    </bean>
                </entry>
            </map>
        </property>
    </bean>
    
    <bean id="BUILDER_PLAN_FACT_NIOKR__FACT_LABOUR" class="pst.arm.client.modules.datagrid.domain.DColumnBuilderNumber"
          lazy-init="false">
        <property name="columns">
            <map>
                <entry>
                    <key>
                        <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                            <property name="columnName" value="FACT_LABOUR"/>
                            <property name="tableAlias" value="MAIN"/>
                        </bean>
                    </key>
                    <bean class="pst.arm.client.modules.datagrid.domain.DColumn">
                        <property name="name" value="FACT_LABOUR"/>
                        <property name="caption" value="Фактически выполнено, чел/мес."/>
                        <property name="isNotNull" value="FALSE"/>
                        <property name="columnProperty" ref="DCPDecimalNotNegative12_2_maxmin"/>
                        <property name="isVisible" value="FALSE"/>
                        <property name="isVisibleEdit" value="TRUE"/>
                        <property name="isFiltr" value="FALSE"/>
                        <property name="isHidden" value="true"/>
                    </bean>
                </entry>
            </map>
        </property>
    </bean>

    <bean id="BUILDER_PLAN_FACT_NIOKR__FACT_LABOUR_COLOR" class="pst.arm.client.modules.datagrid.domain.DColumnBuilderString"
          lazy-init="false">
        <property name="columns">
            <map>
                <entry>
                    <key>
                        <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                            <property name="columnName" value="FACT_LABOUR_COLOR"/>
                            <property name="tableAlias" value="MAIN"/>
                        </bean>
                    </key>
                    <bean class="pst.arm.client.modules.datagrid.domain.DColumn">
                        <property name="name" value="FACT_LABOUR"/>
                        <property name="caption" value="Фактически выполнено, чел/мес."/>
                        <property name="isNotNull" value="FALSE"/>
                        <property name="columnProperty">
                            <bean class="pst.arm.client.modules.datagrid.domain.expansion.DColumnPropertyFactLabourForPlanFactNiokr">
                                <property name="format" value="" />
                                <property name="type" value="STRING" />
                                <property name="widthColumn" value="100" />
                            </bean>
                        </property>
                        <property name="isVisible" value="TRUE"/>
                        <property name="isVisibleEdit" value="FALSE"/>
                        <property name="isFiltr" value="FALSE"/>
                    </bean>
                </entry>
            </map>
        </property>
    </bean>

    <bean id="BUILDER_PLAN_FACT_NIOKR__ALL_FACT_LABOUR" class="pst.arm.client.modules.datagrid.domain.DColumnBuilderNumber"
          lazy-init="false">
        <property name="columns">
            <map>
                <entry>
                    <key>
                        <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                            <property name="columnName" value="ALL_FACT_LABOUR"/>
                            <property name="tableAlias" value="MAIN"/>
                        </bean>
                    </key>
                    <bean class="pst.arm.client.modules.datagrid.domain.DColumn">
                        <property name="name" value="ALL_FACT_LABOUR"/>
                        <property name="caption" value="Фактически выполнено, чел/мес."/>
                        <property name="isNotNull" value="FALSE"/>
                        <property name="columnProperty" ref="DCPDecimalNotNegative12_2_maxmin"/>
                        <property name="isVisible" value="FALSE"/>
                        <property name="isVisibleEdit" value="TRUE"/>
                        <property name="isFiltr" value="FALSE"/>
                     <!--   <property name="isHidden" value="true"/> -->
                    </bean>
                </entry>
            </map>
        </property>
    </bean>

    <bean id="BUILDER_PLAN_FACT_NIOKR__ALL_FACT_LABOUR_COLOR" class="pst.arm.client.modules.datagrid.domain.DColumnBuilderString"
          lazy-init="false">
        <property name="columns">
            <map>
                <entry>
                    <key>
                        <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                            <property name="columnName" value="ALL_FACT_LABOUR_COLOR"/>
                            <property name="tableAlias" value="MAIN"/>
                        </bean>
                    </key>
                    <bean class="pst.arm.client.modules.datagrid.domain.DColumn">
                        <property name="name" value="ALL_FACT_LABOUR"/>
                        <property name="caption" value="Фактически выполнено, чел/мес."/>
                        <property name="isNotNull" value="FALSE"/>
                        <property name="columnProperty">
                            <bean class="pst.arm.client.modules.datagrid.domain.expansion.DColumnPropertyAllFactLabourForPlanFactNiokr">
                                <property name="format" value="" />
                                <property name="type" value="STRING" />
                                <property name="widthColumn" value="100" />
                            </bean>
                        </property>
                        <property name="isVisible" value="TRUE"/>
                        <property name="isVisibleEdit" value="FALSE"/>
                        <property name="isFiltr" value="FALSE"/>
                    </bean>
                </entry>
            </map>
        </property>
    </bean>

    <bean id="BUILDER_PLAN_FACT_NIOKR__FACT_LABOUR_DOP1" class="pst.arm.client.modules.datagrid.domain.DColumnBuilderNumber"
          lazy-init="false">
        <property name="columns">
            <map>
                <entry>
                    <key>
                        <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                            <property name="columnName" value="FACT_LABOUR_DOP1"/>
                            <property name="tableAlias" value="MAIN"/>
                        </bean>
                    </key>
                    <bean class="pst.arm.client.modules.datagrid.domain.DColumn">
                        <property name="name" value="ALL_FACT_LABOUR"/>
                        <property name="sqlForColumn" value="dbo.SUMM_FACT_LABOUR(MAIN.WORK_PLAN_ID,%pnDateNext%)-dbo.SUMM_FACT_LABOUR(MAIN.WORK_PLAN_ID,%pnDate%)"/>
                        <property name="caption" value="Фактически выполнено, чел/мес."/>
                        <property name="isNotNull" value="FALSE"/>
                        <property name="columnProperty" ref="DCPDecimalNotNegative12_2_maxmin"/>
                        <property name="isVisible" value="FALSE"/>
                        <property name="isVisibleEdit" value="TRUE"/>
                        <property name="isFiltr" value="FALSE"/>
                        <property name="isHidden" value="true"/>
                    </bean>
                </entry>
            </map>
        </property>
    </bean>
    
    <bean id="BUILDER_PLAN_FACT_NIOKR__FACT_LABOUR_DOP1_COLOR" class="pst.arm.client.modules.datagrid.domain.DColumnBuilderString"
          lazy-init="false">
        <property name="columns">
            <map>
                <entry>
                    <key>
                        <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                            <property name="columnName" value="FACT_LABOUR_DOP1_COLOR"/>
                            <property name="tableAlias" value="MAIN"/>
                        </bean>
                    </key>
                    <bean class="pst.arm.client.modules.datagrid.domain.DColumn">
                        <property name="name" value="ALL_FACT_LABOUR"/>
                        <property name="sqlForColumn" value="dbo.SUMM_FACT_LABOUR(MAIN.WORK_PLAN_ID,%pnDateNext%)-dbo.SUMM_FACT_LABOUR(MAIN.WORK_PLAN_ID,%pnDate%)"/>
                        <property name="caption" value="Фактически выполнено, чел/мес."/>
                        <property name="isNotNull" value="FALSE"/>
                        <property name="columnProperty">
                            <bean class="pst.arm.client.modules.datagrid.domain.expansion.DColumnPropertyFactLabourDop1ForPlanFactNiokr">
                                <property name="format" value="" />
                                <property name="type" value="STRING" />
                                <property name="widthColumn" value="100" />
                            </bean>
                        </property>
                        <property name="isVisible" value="TRUE"/>
                        <property name="isVisibleEdit" value="FALSE"/>
                        <property name="isFiltr" value="FALSE"/>
                    </bean>
                </entry>
            </map>
        </property>
    </bean>
    
    <bean id="BUILDER_PLAN_FACT_NIOKR__FACT_COST" class="pst.arm.client.modules.datagrid.domain.DColumnBuilderNumber"
          lazy-init="false">
        <property name="columns">
            <map>
                <entry>
                    <key>
                        <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                            <property name="columnName" value="FACT_COST"/>
                            <property name="tableAlias" value="MAIN"/>
                        </bean>
                    </key>
                    <bean class="pst.arm.client.modules.datagrid.domain.DColumn">
                        <property name="name" value="FACT_COST"/>
                        <property name="caption" value="Фактически выполнено, руб."/>
                        <property name="isNotNull" value="FALSE"/>
                        <property name="columnProperty" ref="DCPDecimalNotNegative38_4_00"/>
                        <property name="isVisible" value="TRUE"/>
                        <property name="isVisibleEdit" value="TRUE"/>
                        <property name="isFiltr" value="FALSE"/>
                    </bean>
                </entry>
            </map>
        </property>
    </bean>

    <bean id="BUILDER_PLAN_FACT_NIOKR__ALL_FACT_COST" class="pst.arm.client.modules.datagrid.domain.DColumnBuilderNumber"
          lazy-init="false">
        <property name="columns">
            <map>
                <entry>
                    <key>
                        <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                            <property name="columnName" value="ALL_FACT_COST"/>
                            <property name="tableAlias" value="MAIN"/>
                        </bean>
                    </key>
                    <bean class="pst.arm.client.modules.datagrid.domain.DColumn">
                        <property name="name" value="ALL_FACT_COST"/>
                        <property name="caption" value="Фактически выполнено, руб."/>
                        <property name="isNotNull" value="FALSE"/>
                        <property name="columnProperty" ref="DCPDecimalNotNegative38_4_00"/>
                        <property name="isVisible" value="TRUE"/>
                        <property name="isVisibleEdit" value="TRUE"/>
                        <property name="isFiltr" value="FALSE"/>
                    </bean>
                </entry>
            </map>
        </property>
    </bean>
    
     <bean id="BUILDER_PLAN_FACT_NIOKR__FACT_COST_DOP1" class="pst.arm.client.modules.datagrid.domain.DColumnBuilderNumber"
          lazy-init="false">
        <property name="columns">
            <map>
                <entry>
                    <key>
                        <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                            <property name="columnName" value="FACT_COST"/>
                            <property name="tableAlias" value="MAIN"/>
                        </bean>
                    </key>
                    <bean class="pst.arm.client.modules.datagrid.domain.DColumn">
                        <property name="name" value="ALL_FACT_COST"/>
                        <property name="sqlForColumn" value="dbo.SUMM_FACT_COST(MAIN.WORK_PLAN_ID,%pnDateNext%)-dbo.SUMM_FACT_COST(MAIN.WORK_PLAN_ID,%pnDate%)"/>
                        <property name="caption" value="Фактически выполнено, руб."/>
                        <property name="isNotNull" value="FALSE"/>
                        <property name="columnProperty" ref="DCPDecimalNotNegative38_4_00"/>
                        <property name="isVisible" value="TRUE"/>
                        <property name="isVisibleEdit" value="TRUE"/>
                        <property name="isFiltr" value="FALSE"/>
                    </bean>
                </entry>
            </map>
        </property>
    </bean>
    
    <bean id="BUILDER_PLAN_FACT_NIOKR__COMMENT" class="pst.arm.client.modules.datagrid.domain.DColumnBuilderString"
          lazy-init="false">
        <property name="columns">
            <map>
                <entry>
                    <key>
                        <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                            <property name="columnName" value="COMMENT"/>
                            <property name="tableAlias" value="MAIN"/>
                        </bean>
                    </key>
                    <bean class="pst.arm.client.modules.datagrid.domain.DColumn">
                        <property name="name" value="COMMENT"/>
                        <property name="caption" value="Отчетность"/>
                        <property name="columnProperty" ref="DCPTextArea255"/>
                        <property name="isVisible" value="true"/>
                        <property name="isEditable" value="true"/>
                        <property name="isVisibleEdit" value="true"/>
                        <property name="isFiltr" value="false"/>
                    </bean>
                </entry>
            </map>
        </property>
    </bean>
    
    <bean id="BUILDER_PLAN_FACT_NIOKR__CONTRACT_STAGE_ID" class="pst.arm.client.modules.datagrid.domain.DColumnBuilderNumber"
          lazy-init="false">
        <property name="columns">
            <map>
                <entry>
                    <key>
                        <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                            <property name="columnName" value="CONTRACT_STAGE_ID"/>
                            <property name="tableAlias" value="WORK_PLAN"/>
                        </bean>
                    </key>
                    <bean class="pst.arm.client.modules.datagrid.domain.DColumn">
                        <property name="name" value="CONTRACT_STAGE_ID"/>
                        <property name="caption" value="CONTRACT_STAGE_ID"/>
                        <property name="isVisible" value="false"/>
                        <property name="isVisibleEdit" value="false"/>
                        <property name="columnProperty" ref="DCPIntegerNotNegative"/>
                        <property name="isNotNull" value="true"/>
                        <property name="isFiltr" value="false"/>
                        <property name="isHidden" value="true"/>
                    </bean>
                </entry>
            </map>
        </property>
    </bean>

    <!-- описываем сам "запрос" -->
    <bean id="PLAN_FACT_NIOKR" class="pst.arm.client.modules.datagrid.domain.DTable" lazy-init="false">
        <property name="columnBuilders">
            <list>
                <ref bean="BUILDER_PLAN_FACT_NIOKR__DEP_EX_PLAN_ID"/>
                <ref bean="BUILDER_PLAN_FACT_NIOKR__DEPART_ID"/>
                <ref bean="BUILDER_PLAN_FACT_NIOKR__MONTH_NUM"/>                
                <ref bean="BUILDER_PLAN_FACT_NIOKR__YEAR_NUM"/>
                <ref bean="BUILDER_PLAN_FACT_NIOKR__CONTRACT_DATE_CORR"/>                
                <ref bean="BUILDER_PLAN_FACT_NIOKR__CIPHER"/>
                <ref bean="BUILDER_PLAN_FACT_NIOKR__ORDER_NUMBER_FILTR"/>
                <ref bean="BUILDER_PLAN_FACT_NIOKR__WORK_NAME"/>
                <ref bean="BUILDER_PLAN_FACT_NIOKR__STAGE_NUMBER"/>                
                <ref bean="BUILDER_PLAN_FACT_NIOKR__WORK_NUMBER"/>
                <ref bean="BUILDER_PLAN_FACT_NIOKR__DESCRIPTION"/>
                <ref bean="BUILDER_PLAN_FACT_NIOKR__ORDER_NUMBER_NOFILTR"/>
                <ref bean="BUILDER_PLAN_FACT_NIOKR__CODE"/>                
                <ref bean="BUILDER_PLAN_FACT_NIOKR__WORK_END_DATE"/>
                <ref bean="BUILDER_PLAN_FACT_NIOKR__END_DATE"/>
                <ref bean="BUILDER_PLAN_FACT_NIOKR__PLAN_LABOUR"/>
                <ref bean="BUILDER_PLAN_FACT_NIOKR__PLAN_LABOUR_DOP"/>
                <ref bean="BUILDER_PLAN_FACT_NIOKR__PLAN_COST"/>
                <ref bean="BUILDER_PLAN_FACT_NIOKR__PLAN_COST_DOP"/>
                <ref bean="BUILDER_PLAN_FACT_NIOKR__FACT_LABOUR"/>
                <ref bean="BUILDER_PLAN_FACT_NIOKR__FACT_LABOUR_COLOR"/>
                <ref bean="BUILDER_PLAN_FACT_NIOKR__FACT_COST"/>
                <ref bean="BUILDER_PLAN_FACT_NIOKR__COMMENT"/>
                <ref bean="BUILDER_PLAN_FACT_NIOKR__CONTRACT_STAGE_ID"/>
            </list>
        </property>
        <property name="strOrderByStart" value="cast(dbo.RecursivePartSortNUM(dbo.RecursiveStringNUM(MAIN.WORK_NUMBER),1) as int) ASC,
						cast(dbo.RecursivePartSortNUM(dbo.RecursiveStringNUM(MAIN.WORK_NUMBER),2) as int) ASC,
						cast(dbo.RecursivePartSortNUM(dbo.RecursiveStringNUM(MAIN.WORK_NUMBER),3) as int) ASC,
						cast(dbo.RecursivePartSortNUM(dbo.RecursiveStringNUM(MAIN.WORK_NUMBER),4) as int) ASC,
						cast(dbo.RecursivePartSortNUM(dbo.RecursiveStringNUM(MAIN.WORK_NUMBER),5) as int) ASC,
						cast(dbo.RecursivePartSortNUM(dbo.RecursiveStringNUM(MAIN.WORK_NUMBER),6) as int) ASC
                                                "/>
        <property name="tables">
            <map>
                <entry key="MAIN" value="PLAN_FACT_NIOKR"/>
                <entry key="WORK_PLAN" value="WORK_PLAN"/>
                <entry key="SERV_CONTRACT_STAGE" value="SERV_CONTRACT_STAGE"/>
                <entry key="CONTRACT" value="CONTRACT"/>
                <entry key="OCP" value="OCP"/>
                <entry key="ORDER_D" value="ORDER_D"/>
                <entry key="DEPART" value="DEPART"/>
            </map>
        </property>
        <property name="tableJoins">
            <list>
                <bean class="pst.arm.client.modules.datagrid.domain.DTableJoin">
                    <property name="tableOne" value="MAIN"/>
                    <property name="tableTwo" value="WORK_PLAN"/>
                    <property name="relationType" value="INNER"/>
                    <property name="columnJoins">
                        <list>
                            <bean class="pst.arm.client.modules.datagrid.domain.DColumnJoin">
                                <property name="columnNameTableOne" value="WORK_PLAN_ID"/>
                                <property name="columnNameTableTwo" value="WORK_PLAN_ID"/>
                                <property name="columnRelationType" value="AND"/>
                            </bean>
                        </list>
                    </property>
                </bean>
                <bean class="pst.arm.client.modules.datagrid.domain.DTableJoin">
                    <property name="tableOne" value="WORK_PLAN"/>
                    <property name="tableTwo" value="SERV_CONTRACT_STAGE"/>
                    <property name="relationType" value="INNER"/>
                    <property name="columnJoins">
                        <list>
                            <bean class="pst.arm.client.modules.datagrid.domain.DColumnJoin">
                                <property name="columnNameTableOne" value="CONTRACT_STAGE_ID"/>
                                <property name="columnNameTableTwo" value="CONTRACT_STAGE_ID"/>
                                <property name="columnRelationType" value="AND"/>
                            </bean>
                        </list>
                    </property>
                </bean>
                <bean class="pst.arm.client.modules.datagrid.domain.DTableJoin">
                    <property name="tableOne" value="SERV_CONTRACT_STAGE"/>
                    <property name="tableTwo" value="CONTRACT"/>
                    <property name="relationType" value="LEFT"/>
                    <property name="columnJoins">
                        <list>
                            <bean class="pst.arm.client.modules.datagrid.domain.DColumnJoin">
                                <property name="columnNameTableOne" value="CONTRACT_ID"/>
                                <property name="columnNameTableTwo" value="CONTRACT_ID"/>
                                <property name="columnRelationType" value="AND"/>
                            </bean>
                        </list>
                    </property>
                </bean>
                <bean class="pst.arm.client.modules.datagrid.domain.DTableJoin">
                    <property name="tableOne" value="SERV_CONTRACT_STAGE"/>
                    <property name="tableTwo" value="OCP"/>
                    <property name="relationType" value="INNER"/>
                    <property name="columnJoins">
                        <list>
                            <bean class="pst.arm.client.modules.datagrid.domain.DColumnJoin">
                                <property name="columnNameTableOne" value="OCP_ID"/>
                                <property name="columnNameTableTwo" value="OCP_ID"/>
                                <property name="columnRelationType" value="AND"/>
                            </bean>
                        </list>
                    </property>
                </bean>
                <bean class="pst.arm.client.modules.datagrid.domain.DTableJoin">
                    <property name="tableOne" value="OCP"/>
                    <property name="tableTwo" value="ORDER_D"/>
                    <property name="relationType" value="INNER"/>
                    <property name="columnJoins">
                        <list>
                            <bean class="pst.arm.client.modules.datagrid.domain.DColumnJoin">
                                <property name="columnNameTableOne" value="ORDER_ID"/>
                                <property name="columnNameTableTwo" value="ORDER_ID"/>
                                <property name="columnRelationType" value="AND"/>
                            </bean>
                        </list>
                    </property>
                </bean>
                 <bean class="pst.arm.client.modules.datagrid.domain.DTableJoin">
                    <property name="tableOne" value="WORK_PLAN"/>
                    <property name="tableTwo" value="DEPART"/>
                    <property name="relationType" value="INNER"/>
                    <property name="columnJoins">
                        <list>
                            <bean class="pst.arm.client.modules.datagrid.domain.DColumnJoin">
                                <property name="columnNameTableOne" value="DEPART_ID"/>
                                <property name="columnNameTableTwo" value="DEPART_ID"/>
                                <property name="columnRelationType" value="AND"/>
                            </bean>
                        </list>
                    </property>
                </bean>                                
             </list>
        </property>        
        <property name="subTables">
            <list>
                <bean class="pst.arm.client.modules.datagrid.domain.SRelationInfo">
                    <property name="queryName" value="DEPART_EXECUTOR_FACT"/>
                    <property name="caption" value="Отметки о выполнении"/>
                    <property name="passedFieds">
                        <map>
                            <entry>
                                <key>
                                    <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                                        <property name="columnName" value="PLAN_LABOUR"/>
                                        <property name="tableAlias" value="MAIN"/>
                                    </bean>
                                </key>
                                <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                                    <property name="columnName" value="FACT_LABOUR"/>
                                    <property name="tableAlias" value="MAIN"/>
                                </bean>
                            </entry>
                            <entry>
                                <key>
                                    <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                                        <property name="columnName" value="PLAN_COST"/>
                                        <property name="tableAlias" value="MAIN"/>
                                    </bean>
                                </key>
                                <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                                    <property name="columnName" value="FACT_COST"/>
                                    <property name="tableAlias" value="MAIN"/>
                                </bean>
                            </entry>
                            <entry>
                                <key>
                                    <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                                        <property name="columnName" value="PLAN_LABOUR_DOP"/>
                                        <property name="tableAlias" value="WORK_PLAN"/>
                                    </bean>
                                </key>
                                <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                                    <property name="columnName" value="PLAN_LABOUR"/>
                                    <property name="tableAlias" value="WORK_PLAN"/>
                                </bean>
                           </entry>
                           <entry>
                                <key>
                                    <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                                        <property name="columnName" value="PLAN_COST_DOP"/>
                                        <property name="tableAlias" value="WORK_PLAN"/>
                                    </bean>
                                </key>
                                <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                                    <property name="columnName" value="PLAN_COST"/>
                                    <property name="tableAlias" value="WORK_PLAN"/>
                                </bean>
                            </entry>
                            <entry>
                                <key>
                                    <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                                        <property name="columnName" value="END_DATE"/>
                                        <property name="tableAlias" value="MAIN"/>
                                    </bean>
                                </key>
                                <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                                    <property name="columnName" value="END_DATE"/>
                                    <property name="tableAlias" value="MAIN"/>
                                </bean>
                            </entry>
                            <entry>
                                <key>
                                    <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                                        <property name="columnName" value="CONTRACT_STAGE_ID"/>
                                        <property name="tableAlias" value="WORK_PLAN"/>
                                    </bean>
                                </key>
                                <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                                    <property name="columnName" value="CONTRACT_STAGE_ID"/>
                                    <property name="tableAlias" value="WORK_PLAN"/>
                                </bean>
                            </entry> 
                        </map>
                    </property>                    
                    <property name="relations">
                        <map>
                            <entry>
                                <key>
                                    <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                                        <property name="columnName" value="DEP_EX_PLAN_ID"/>
                                        <property name="tableAlias" value="MAIN"/>
                                    </bean>
                                </key>
                                <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                                    <property name="columnName" value="DEP_EX_PLAN_ID"/>
                                    <property name="tableAlias" value="MAIN"/>
                                </bean>
                            </entry>
                        </map>
                    </property>                    
                </bean>
                <bean class="pst.arm.client.modules.datagrid.domain.SRelationInfo">
                    <property name="queryName" value="DEPART_EXECUTOR_AUDIT_FACT"/>
                    <property name="caption" value="История изменения отметок о выполнении"/>
                    <property name="passedFieds">
                        <map>
                            <entry>
                                <key>
                                    <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                                        <property name="columnName" value="PLAN_LABOUR"/>
                                        <property name="tableAlias" value="MAIN"/>
                                    </bean>
                                </key>
                                <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                                    <property name="columnName" value="FACT_LABOUR"/>
                                    <property name="tableAlias" value="MAIN"/>
                                </bean>
                            </entry>
                            <entry>
                                <key>
                                    <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                                        <property name="columnName" value="PLAN_COST"/>
                                        <property name="tableAlias" value="MAIN"/>
                                    </bean>
                                </key>
                                <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                                    <property name="columnName" value="FACT_COST"/>
                                    <property name="tableAlias" value="MAIN"/>
                                </bean>
                            </entry>
                            <entry>
                                <key>
                                    <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                                        <property name="columnName" value="PLAN_LABOUR_DOP"/>
                                        <property name="tableAlias" value="WORK_PLAN"/>
                                    </bean>
                                </key>
                                <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                                    <property name="columnName" value="PLAN_LABOUR"/>
                                    <property name="tableAlias" value="WORK_PLAN"/>
                                </bean>
                           </entry>
                           <entry>
                                <key>
                                    <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                                        <property name="columnName" value="PLAN_COST_DOP"/>
                                        <property name="tableAlias" value="WORK_PLAN"/>
                                    </bean>
                                </key>
                                <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                                    <property name="columnName" value="PLAN_COST"/>
                                    <property name="tableAlias" value="WORK_PLAN"/>
                                </bean>
                            </entry>
                            <entry>
                                <key>
                                    <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                                        <property name="columnName" value="END_DATE"/>
                                        <property name="tableAlias" value="MAIN"/>
                                    </bean>
                                </key>
                                <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                                    <property name="columnName" value="END_DATE"/>
                                    <property name="tableAlias" value="MAIN"/>
                                </bean>
                            </entry>
                            <entry>
                                <key>
                                    <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                                        <property name="columnName" value="CONTRACT_STAGE_ID"/>
                                        <property name="tableAlias" value="WORK_PLAN"/>
                                    </bean>
                                </key>
                                <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                                    <property name="columnName" value="CONTRACT_STAGE_ID"/>
                                    <property name="tableAlias" value="WORK_PLAN"/>
                                </bean>
                            </entry> 
                        </map>
                    </property>                  
                    <property name="relations">
                        <map>
                            <entry>
                                <key>
                                    <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                                        <property name="columnName" value="DEP_EX_PLAN_ID"/>
                                        <property name="tableAlias" value="MAIN"/>
                                    </bean>
                                </key>
                                <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                                    <property name="columnName" value="DEP_EX_PLAN_ID"/>
                                    <property name="tableAlias" value="MAIN"/>
                                </bean>
                            </entry>
                        </map>
                    </property>
                </bean>
            </list>
        </property>
        <property name="caption" value="Работы плана"/>            
        <property name="queryName" value="PLAN_FACT_NIOKR"/>
        <property name="countRowsInFiltrColumn" value="1"/>
        <property name="isFiltrShow" value="true"/>
        <property name="isShowReport" value="false"/>                   
    </bean>

    
    <bean id="BUILDER_PLAN_FACT_NIOKR__END_DATE_DOP1" class="pst.arm.client.modules.datagrid.domain.expansion.DColumnBuilderDateLess"
          lazy-init="false">
        <property name="columns">
            <map>
                <entry>
                    <key>
                        <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                            <property name="columnName" value="END_DATE"/>
                            <property name="tableAlias" value="MAIN"/>
                        </bean>
                    </key>
                    <bean class="pst.arm.client.modules.datagrid.domain.DColumn">
                        <property name="name" value="END_DATE"/>
                        <property name="caption" value="Срок выполнения планируемый"/>
                        <property name="columnProperty" ref="DCPDateShort"/>
                        <property name="isVisible" value="true"/>
                        <property name="isVisibleEdit" value="true"/>
                        <property name="isEditable" value="false"/>
                        <property name="isEditableAdd" value="false"/>
                        <property name="isFiltr" value="false"/>
                    </bean>
                </entry>
            </map>
        </property>
    </bean>
    
 <bean id="BUILDER_PLAN_FACT_NIOKR__FACT_DATE_DOP1" class="pst.arm.client.modules.datagrid.domain.expansion.DColumnBuilderDateForFactDate"
          lazy-init="false">
        <property name="columns">
            <map>
                <entry>
                    <key>
                        <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                            <property name="columnName" value="ALL_FACT_DATE"/>
                            <property name="tableAlias" value="MAIN"/>
                        </bean>
                    </key>
                    <bean class="pst.arm.client.modules.datagrid.domain.DColumn">
                        <property name="name" value="ALL_FACT_DATE"/>
                        <property name="caption" value="Фактическая дата выполнения"/>
                        <property name="columnProperty" ref="DCPDateShort"/>
                        <property name="isVisible" value="true"/>
                        <property name="isVisibleEdit" value="true"/>
                        <property name="isEditable" value="false"/>
                        <property name="isEditableAdd" value="false"/>
                        <property name="isFiltr" value="false"/>
                    </bean>
                </entry>
            </map>
        </property>
    </bean>
    
    <bean id="BUILDER_PLAN_FACT_NIOKR__CONTRACT_DATE_CORR_DOP1" class="pst.arm.client.modules.datagrid.domain.DColumnBuilderDate"
          lazy-init="false">
        <property name="columns">
            <map>
                <entry>
                    <key>
                        <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                            <property name="columnName" value="DATE_CORR"/>
                            <property name="tableAlias" value="MAIN"/>
                        </bean>
                    </key>
                    <bean class="pst.arm.client.modules.datagrid.domain.DColumn">
                        <property name="name" value="DATE_CORR"/>
                        <property name="caption" value="Дата корректировки"/>
                        <property name="columnProperty" ref="DCPDateTimeCurrent"/>
                        <property name="isVisible" value="false"/>
                        <property name="isVisibleEdit" value="false"/>
                        <property name="isFiltr" value="false"/>
                        <property name="isInserted" value="false"/>
                        <property name="isEditable" value="false"/>
                        <property name="isEditableAdd" value="false"/>
                    </bean>
                </entry>
            </map>
        </property>
    </bean>


    <bean id="BUILDER_PLAN_FACT_NIOKR__PLAN_LABOUR_DOP1" class="pst.arm.client.modules.datagrid.domain.DColumnBuilderNumber"
          lazy-init="false">
        <property name="columns">
            <map>
                <entry>
                    <key>
                        <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                            <property name="columnName" value="PLAN_LABOUR_DOP1"/>
                            <property name="tableAlias" value="MAIN"/>
                        </bean>
                    </key>
                    <bean class="pst.arm.client.modules.datagrid.domain.DColumn">
                        <property name="name" value="PLAN_LABOUR"/>
                        <!--<property name="sqlForColumn" value="ISNULL(STR(ISNULL(MAIN.PLAN_LABOUR,0)-ISNULL(MAIN.FACT_LABOUR,0),10,2),null)"/>-->
                        <property name="sqlForColumn" value="ISNULL(MAIN.PLAN_LABOUR,0)-dbo.SUMM_FACT_LABOUR(MAIN.WORK_PLAN_ID,%pnDate%) "/>
                        <property name="caption" value="Утвержденный план, чел/мес."/>
                        <property name="isNotNull" value="FALSE"/>
                        <property name="columnProperty" ref="DCPDecimalNotNegative12_2_maxmin"/>
                        <property name="isVisible" value="TRUE"/>
                        <property name="isVisibleEdit" value="TRUE"/>
                        <property name="isFiltr" value="FALSE"/>
                    </bean>
                </entry>
            </map>
        </property>
    </bean>
    
    <bean id="BUILDER_PLAN_FACT_NIOKR__PLAN_COST_DOP1" class="pst.arm.client.modules.datagrid.domain.DColumnBuilderNumber"
          lazy-init="false">
        <property name="columns">
            <map>
                <entry>
                    <key>
                        <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                            <property name="columnName" value="PLAN_COST"/>
                            <property name="tableAlias" value="MAIN"/>
                        </bean>
                    </key>
                    <bean class="pst.arm.client.modules.datagrid.domain.DColumn">
                        <property name="name" value="PLAN_COST"/>
                        <!--<property name="sqlForColumn" value="ISNULL(STR(ISNULL(MAIN.PLAN_COST,0)-ISNULL(MAIN.FACT_COST,0),10,2),null)"/>                                                -->
                        <property name="sqlForColumn" value="ISNULL(MAIN.PLAN_COST,0)-dbo.SUMM_FACT_COST(MAIN.WORK_PLAN_ID,%pnDate%) "/>
                        <property name="caption" value="Утвержденный план, руб."/>
                        <property name="isNotNull" value="FALSE"/>
                        <property name="columnProperty" ref="DCPDecimalNotNegative38_4_00"/>
                        <property name="isVisible" value="TRUE"/>
                        <property name="isVisibleEdit" value="TRUE"/>
                        <property name="isFiltr" value="FALSE"/>
                    </bean>
                </entry>
            </map>
        </property>
    </bean>

        
    <!-- описываем сам "запрос" -->
    <bean id="PLAN_FACT_NIOKR_DOP1" class="pst.arm.client.modules.datagrid.domain.DTable" lazy-init="false">
        <property name="columnBuilders">
            <list>
                <ref bean="BUILDER_PLAN_FACT_NIOKR__DEP_EX_PLAN_ID"/>
                <ref bean="BUILDER_PLAN_FACT_NIOKR__DEPART_ID"/>
                <ref bean="BUILDER_PLAN_FACT_NIOKR__CONTRACT_DATE_CORR_DOP1"/>                
                <ref bean="BUILDER_PLAN_FACT_NIOKR__CIPHER"/>
                <ref bean="BUILDER_PLAN_FACT_NIOKR__ORDER_NUMBER_FILTR"/>
                <ref bean="BUILDER_PLAN_FACT_NIOKR__WORK_NAME"/>
                <ref bean="BUILDER_PLAN_FACT_NIOKR__STAGE_NUMBER"/>                
                <ref bean="BUILDER_PLAN_FACT_NIOKR__WORK_NUMBER"/>
                <ref bean="BUILDER_PLAN_FACT_NIOKR__DESCRIPTION"/>
                <ref bean="BUILDER_PLAN_FACT_NIOKR__ORDER_NUMBER_NOFILTR"/>
                <ref bean="BUILDER_PLAN_FACT_NIOKR__CODE"/>                
                <ref bean="BUILDER_PLAN_FACT_NIOKR__WORK_END_DATE"/>
                <ref bean="BUILDER_PLAN_FACT_NIOKR__END_DATE_DOP1"/>
                <ref bean="BUILDER_PLAN_FACT_NIOKR__FACT_DATE_DOP1"/>
                <ref bean="BUILDER_PLAN_FACT_NIOKR__PLAN_LABOUR_DOP1"/>
                <ref bean="BUILDER_PLAN_FACT_NIOKR__PLAN_COST_DOP1"/>
                <ref bean="BUILDER_PLAN_FACT_NIOKR__FACT_LABOUR_DOP1"/>
                <ref bean="BUILDER_PLAN_FACT_NIOKR__FACT_LABOUR_DOP1_COLOR"/>
                <ref bean="BUILDER_PLAN_FACT_NIOKR__FACT_COST_DOP1"/>
                <ref bean="BUILDER_PLAN_FACT_NIOKR__COMMENT"/>
                <ref bean="BUILDER_PLAN_FACT_NIOKR__PLAN_LABOUR_DOP"/>
                <ref bean="BUILDER_PLAN_FACT_NIOKR__PLAN_COST_DOP"/>
                <ref bean="BUILDER_PLAN_FACT_NIOKR__CONTRACT_STAGE_ID"/>

            </list>
        </property>
        <property name="strOrderByStart" value="cast(dbo.RecursivePartSortNUM(dbo.RecursiveStringNUM(MAIN.WORK_NUMBER),1) as int) ASC,
						cast(dbo.RecursivePartSortNUM(dbo.RecursiveStringNUM(MAIN.WORK_NUMBER),2) as int) ASC,
						cast(dbo.RecursivePartSortNUM(dbo.RecursiveStringNUM(MAIN.WORK_NUMBER),3) as int) ASC,
						cast(dbo.RecursivePartSortNUM(dbo.RecursiveStringNUM(MAIN.WORK_NUMBER),4) as int) ASC,
						cast(dbo.RecursivePartSortNUM(dbo.RecursiveStringNUM(MAIN.WORK_NUMBER),5) as int) ASC,
						cast(dbo.RecursivePartSortNUM(dbo.RecursiveStringNUM(MAIN.WORK_NUMBER),6) as int) ASC
                                                "/>
        <property name="tables">
            <map>
                <entry key="MAIN" value="PLAN_FACT_NIOKR"/>
                <entry key="WORK_PLAN" value="WORK_PLAN"/>
                <entry key="SERV_CONTRACT_STAGE" value="SERV_CONTRACT_STAGE"/>
                <entry key="CONTRACT" value="CONTRACT"/>
                <entry key="OCP" value="OCP"/>
                <entry key="ORDER_D" value="ORDER_D"/>
                <entry key="DEPART" value="DEPART"/>
            </map>
        </property>
        <property name="tableJoins">
            <list>
                <bean class="pst.arm.client.modules.datagrid.domain.DTableJoin">
                    <property name="tableOne" value="MAIN"/>
                    <property name="tableTwo" value="WORK_PLAN"/>
                    <property name="relationType" value="INNER"/>
                    <property name="columnJoins">
                        <list>
                            <bean class="pst.arm.client.modules.datagrid.domain.DColumnJoin">
                                <property name="columnNameTableOne" value="WORK_PLAN_ID"/>
                                <property name="columnNameTableTwo" value="WORK_PLAN_ID"/>
                                <property name="columnRelationType" value="AND"/>
                            </bean>
                        </list>
                    </property>
                </bean>
                <bean class="pst.arm.client.modules.datagrid.domain.DTableJoin">
                    <property name="tableOne" value="WORK_PLAN"/>
                    <property name="tableTwo" value="SERV_CONTRACT_STAGE"/>
                    <property name="relationType" value="INNER"/>
                    <property name="columnJoins">
                        <list>
                            <bean class="pst.arm.client.modules.datagrid.domain.DColumnJoin">
                                <property name="columnNameTableOne" value="CONTRACT_STAGE_ID"/>
                                <property name="columnNameTableTwo" value="CONTRACT_STAGE_ID"/>
                                <property name="columnRelationType" value="AND"/>
                            </bean>
                        </list>
                    </property>
                </bean>
                <bean class="pst.arm.client.modules.datagrid.domain.DTableJoin">
                    <property name="tableOne" value="SERV_CONTRACT_STAGE"/>
                    <property name="tableTwo" value="CONTRACT"/>
                    <property name="relationType" value="LEFT"/>
                    <property name="columnJoins">
                        <list>
                            <bean class="pst.arm.client.modules.datagrid.domain.DColumnJoin">
                                <property name="columnNameTableOne" value="CONTRACT_ID"/>
                                <property name="columnNameTableTwo" value="CONTRACT_ID"/>
                                <property name="columnRelationType" value="AND"/>
                            </bean>
                        </list>
                    </property>
                </bean>
                <bean class="pst.arm.client.modules.datagrid.domain.DTableJoin">
                    <property name="tableOne" value="SERV_CONTRACT_STAGE"/>
                    <property name="tableTwo" value="OCP"/>
                    <property name="relationType" value="INNER"/>
                    <property name="columnJoins">
                        <list>
                            <bean class="pst.arm.client.modules.datagrid.domain.DColumnJoin">
                                <property name="columnNameTableOne" value="OCP_ID"/>
                                <property name="columnNameTableTwo" value="OCP_ID"/>
                                <property name="columnRelationType" value="AND"/>
                            </bean>
                        </list>
                    </property>
                </bean>
                <bean class="pst.arm.client.modules.datagrid.domain.DTableJoin">
                    <property name="tableOne" value="OCP"/>
                    <property name="tableTwo" value="ORDER_D"/>
                    <property name="relationType" value="INNER"/>
                    <property name="columnJoins">
                        <list>
                            <bean class="pst.arm.client.modules.datagrid.domain.DColumnJoin">
                                <property name="columnNameTableOne" value="ORDER_ID"/>
                                <property name="columnNameTableTwo" value="ORDER_ID"/>
                                <property name="columnRelationType" value="AND"/>
                            </bean>
                        </list>
                    </property>
                </bean>
                 <bean class="pst.arm.client.modules.datagrid.domain.DTableJoin">
                    <property name="tableOne" value="WORK_PLAN"/>
                    <property name="tableTwo" value="DEPART"/>
                    <property name="relationType" value="INNER"/>
                    <property name="columnJoins">
                        <list>
                            <bean class="pst.arm.client.modules.datagrid.domain.DColumnJoin">
                                <property name="columnNameTableOne" value="DEPART_ID"/>
                                <property name="columnNameTableTwo" value="DEPART_ID"/>
                                <property name="columnRelationType" value="AND"/>
                            </bean>
                        </list>
                    </property>
                </bean>                                
             </list>
        </property>        
        <property name="subTables">
            <list>
                <bean class="pst.arm.client.modules.datagrid.domain.SRelationInfo">
                    <property name="queryName" value="DEPART_EXECUTOR_FACT"/>
                    <property name="caption" value="Отметки о выполнении"/>
                    <property name="passedFieds">
                        <map>
                            <entry>
                                <key>
                                    <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                                        <property name="columnName" value="PLAN_COST"/>
                                        <property name="tableAlias" value="MAIN"/>
                                    </bean>
                                </key>
                                <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                                    <property name="columnName" value="FACT_COST"/>
                                    <property name="tableAlias" value="MAIN"/>
                                </bean>
                            </entry>
                            <entry>
                                <key>
                                    <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                                        <property name="columnName" value="PLAN_LABOUR_DOP1"/>
                                        <property name="tableAlias" value="MAIN"/>
                                    </bean>
                                </key>
                                <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                                    <property name="columnName" value="FACT_LABOUR"/>
                                    <property name="tableAlias" value="MAIN"/>
                                </bean>
                            </entry>   
                            <entry>
                                <key>
                                    <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                                        <property name="columnName" value="PLAN_LABOUR_DOP"/>
                                        <property name="tableAlias" value="WORK_PLAN"/>
                                    </bean>
                                </key>
                                <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                                    <property name="columnName" value="PLAN_LABOUR"/>
                                    <property name="tableAlias" value="WORK_PLAN"/>
                                </bean>
                           </entry>
                           <entry>
                                <key>
                                    <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                                        <property name="columnName" value="PLAN_COST_DOP"/>
                                        <property name="tableAlias" value="WORK_PLAN"/>
                                    </bean>
                                </key>
                                <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                                    <property name="columnName" value="PLAN_COST"/>
                                    <property name="tableAlias" value="WORK_PLAN"/>
                                </bean>
                            </entry>
                           <!-- <entry>
                                <key>
                                    <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                                        <property name="columnName" value="END_DATE"/>
                                        <property name="tableAlias" value="MAIN"/>
                                    </bean>
                                </key>
                                <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                                    <property name="columnName" value="END_DATE"/>
                                    <property name="tableAlias" value="MAIN"/>
                                </bean>
                            </entry>-->
                            <entry>
                                <key>
                                    <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                                        <property name="columnName" value="CONTRACT_STAGE_ID"/>
                                        <property name="tableAlias" value="WORK_PLAN"/>
                                    </bean>
                                </key>
                                <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                                    <property name="columnName" value="CONTRACT_STAGE_ID"/>
                                    <property name="tableAlias" value="WORK_PLAN"/>
                                </bean>
                            </entry> 
                        </map>
                    </property>                    
                    <property name="relations">
                        <map>
                            <entry>
                                <key>
                                    <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                                        <property name="columnName" value="DEP_EX_PLAN_ID"/>
                                        <property name="tableAlias" value="MAIN"/>
                                    </bean>
                                </key>
                                <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                                    <property name="columnName" value="DEP_EX_PLAN_ID"/>
                                    <property name="tableAlias" value="MAIN"/>
                                </bean>
                            </entry>
                        </map>
                    </property>                    
                </bean>
            </list>
        </property>
        <property name="caption" value="Работы Дополнения 1"/>            
        <property name="queryName" value="PLAN_FACT_NIOKR_DOP1"/>
        <property name="countRowsInFiltrColumn" value="1"/>
        <property name="recordCount" value="300"/>
        <property name="isFiltrShow" value="true"/>
        <property name="isShowReport" value="false"/>                              
    </bean>


    <bean id="BUILDER_PLAN_NTO_YEAR__DEPART_NAME" class="pst.arm.client.modules.datagrid.domain.DColumnBuilderMulti"
          lazy-init="false">
        <property name="isViewOnly" value="true"/>
        <property name="columns">
            <map>
                <entry>
                    <key>
                        <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                            <property name="columnName" value="DEPART_ID"/>
                            <property name="tableAlias" value="MAIN"/>
                        </bean>
                    </key>
                    <bean class="pst.arm.client.modules.datagrid.domain.DColumn">
                        <property name="name" value="DEPART_ID"/>
                        <property name="caption" value="Код подразделения"/>
                        <property name="columnProperty" ref="DCPIntegerNotNegative"/>
                        <property name="isVisible" value="false"/>
                        <property name="isVisibleEdit" value="false"/>
                        <property name="isFiltr" value="false"/>
                    </bean>
                </entry>
                <entry>
                    <key>
                        <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                            <property name="columnName" value="SHORT_NAME"/>
                            <property name="tableAlias" value="COMPANY"/>
                        </bean>
                    </key>
                    <bean class="pst.arm.client.modules.datagrid.domain.DColumn">
                        <property name="name" value="SHORT_NAME"/>
                        <property name="caption" value="Предприятие ГПК"/>
                        <property name="columnProperty" ref="DCPString150"/>
                        <property name="isNotNull" value="true"/>
                        <property name="isFiltr" value="false"/>
                        <property name="isVisible" value="false"/>
                    </bean>
                </entry>
                <entry>
                    <key>
                        <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                            <property name="columnName" value="NAME"/>
                            <property name="tableAlias" value="DEPART"/>
                        </bean>
                    </key>
                    <bean class="pst.arm.client.modules.datagrid.domain.DColumn">
                        <property name="name" value="NAME"/>
                        <property name="caption" value="Подразделение"/>
                        <property name="columnProperty" ref="DCPString150"/>
                        <property name="isNotNull" value="true"/>
                        <property name="isVisible" value="false"/>
                    </bean>
                </entry>
            </map>
        </property>
        <property name="relations">
            <map>
                <entry>
                    <key>
                        <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                            <property name="columnName" value="DEPART_ID"/>
                            <property name="tableAlias" value="MAIN"/>
                        </bean>
                    </key>
                    <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                        <property name="columnName" value="DEPART_ID"/>
                        <property name="tableAlias" value="MAIN"/>
                    </bean>
                </entry>
                <entry>
                    <key>
                        <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                            <property name="columnName" value="SHORT_NAME"/>
                            <property name="tableAlias" value="COMPANY"/>
                        </bean>
                    </key>
                    <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                        <property name="columnName" value="COMPANY_ID"/>
                        <property name="tableAlias" value="MAIN"/>
                    </bean>
                </entry>
                <entry>
                    <key>
                        <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                            <property name="columnName" value="NAME"/>
                            <property name="tableAlias" value="DEPART"/>
                        </bean>
                    </key>
                    <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                        <property name="columnName" value="NAME"/>
                        <property name="tableAlias" value="MAIN"/>
                    </bean>
                </entry>
            </map>
        </property>
        <property name="queryNameForRelation" value="DEPART_EXTENDED_FOR_USER"/>
        <!--<property name="queryNameForRelation" value="DEPART_STRUCTURE"/>-->
        <property name="caption" value="Подразделение"/>
    </bean>


    <bean id="BUILDER_PLAN_NTO_YEAR_VO__COMPANY_ID" class="pst.arm.client.modules.datagrid.domain.DColumnBuilderComboBoxDB"
          lazy-init="false">
        <property name="queryNameForRelation" value="COMPANY" />
        <property name="keyRelationForId">
            <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                <property name="columnName" value="COMPANY_ID" />
                <property name="tableAlias" value="MAIN" />
            </bean>
        </property>
        <property name="keyRelationForName">
            <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                <property name="columnName" value="SHORT_NAME" />
                <property name="tableAlias" value="MAIN" />
            </bean>
        </property>
        <property name="columns">
            <map>
                <entry>
                    <key>
                        <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                            <property name="columnName" value="COMPANY_ID_CB"/>
                            <property name="tableAlias" value="COMPANY"/>
                        </bean>
                    </key>
                    <bean class="pst.arm.client.modules.datagrid.domain.DColumn">
                        <property name="name" value="COMPANY_ID"/>
                        <property name="caption" value="Предприятие ГПК"/>
                        <property name="isNotNull" value="false" />
                        <property name="columnProperty">
                            <bean class="pst.arm.client.modules.datagrid.domain.DColumnPropertyComboBoxInteger">
                                <property name="format" value="" />
                                <property name="type" value="INTEGER" />
                                <property name="widthColumn" value="100" />
                            </bean>
                        </property>
                        <property name="isVisible" value="false" />
                        <property name="isVisibleEdit" value="false"/>
                        <property name="isFiltr" value="true" />
                        <property name="isHidden" value="true" />
                    </bean>
                </entry>
            </map>
        </property>
    </bean>


    <bean id="PLAN_NTO_YEAR_VO" class="pst.arm.client.modules.datagrid.domain.DTable" lazy-init="false">
        <property name="columnBuilders">
            <list>
                <ref bean="BUILDER_PLAN_FACT_NIOKR__DEP_EX_PLAN_ID_FILTR"/>
                <ref bean="BUILDER_PLAN_NTO_YEAR__DEPART_NAME"/>
                <ref bean="BUILDER_PLAN_NTO_YEAR_VO__COMPANY_ID"/>
                <ref bean="BUILDER_PLAN_FACT_NIOKR__MONTH_NUM"/>
                <ref bean="BUILDER_PLAN_FACT_NIOKR__YEAR_NUM"/>
                <ref bean="BUILDER_PLAN_FACT_NIOKR__CONTRACT_DATE_CORR"/>
                <ref bean="BUILDER_PLAN_FACT_NIOKR__CIPHER"/>
                <ref bean="BUILDER_PLAN_FACT_NIOKR__ORDER_D_WORK_NAME"/>
                <ref bean="BUILDER_PLAN_FACT_NIOKR__STAGE_NUMBER_HLV"/>   
                <ref bean="BUILDER_PLAN_FACT_NIOKR__WORK_NUMBER_NOFILTR"/>                
                <ref bean="BUILDER_PLAN_FACT_NIOKR__DESCRIPTION"/>
                <ref bean="BUILDER_PLAN_FACT_NIOKR__ORDER_NUMBER"/>
                <ref bean="BUILDER_PLAN_FACT_NIOKR__CODE"/>
                <ref bean="BUILDER_PLAN_FACT_NIOKR__WORK_END_DATE"/>
                <ref bean="BUILDER_PLAN_FACT_NIOKR__END_DATE"/>
                <ref bean="BUILDER_PLAN_FACT_NIOKR__PLAN_LABOUR"/>
                <ref bean="BUILDER_PLAN_FACT_NIOKR__PLAN_LABOUR_DOP"/>
                <ref bean="BUILDER_PLAN_FACT_NIOKR__PLAN_COST"/>
                <ref bean="BUILDER_PLAN_FACT_NIOKR__ALL_FACT_DATE_NOFILTR"/>
                <ref bean="BUILDER_PLAN_FACT_NIOKR__PLAN_COST_DOP"/>
                <ref bean="BUILDER_PLAN_FACT_NIOKR__ALL_FACT_LABOUR"/>
                <ref bean="BUILDER_PLAN_FACT_NIOKR__ALL_FACT_LABOUR_COLOR"/>
                <ref bean="BUILDER_PLAN_FACT_NIOKR__ALL_FACT_COST"/>
                <ref bean="BUILDER_PLAN_FACT_NIOKR__COMMENT"/>
                <ref bean="BUILDER_PLAN_FACT_NIOKR__BEG_DATE"/>
                <ref bean="BUILDER_PLAN_FACT_NIOKR__BEG_DATE_FROM"/>
                <ref bean="BUILDER_PLAN_FACT_NIOKR__BEG_DATE_TO"/>
            </list>
        </property>
        <property name="isFilterShowAtStart" value="true"/>
        <property name="strOrderByStart" value="DEPART.CODE ASC, ORDER_D.ORDER_NUMBER ASC, MAIN.END_DATE ASC,
                                                cast(dbo.RecursivePartSortNUM(dbo.RecursiveStringNUM(WORK_PLAN.WORK_NUMBER),1) as int) ASC,
						cast(dbo.RecursivePartSortNUM(dbo.RecursiveStringNUM(WORK_PLAN.WORK_NUMBER),2) as int) ASC,
						cast(dbo.RecursivePartSortNUM(dbo.RecursiveStringNUM(WORK_PLAN.WORK_NUMBER),3) as int) ASC,
						cast(dbo.RecursivePartSortNUM(dbo.RecursiveStringNUM(WORK_PLAN.WORK_NUMBER),4) as int) ASC,
						cast(dbo.RecursivePartSortNUM(dbo.RecursiveStringNUM(WORK_PLAN.WORK_NUMBER),5) as int) ASC,
						cast(dbo.RecursivePartSortNUM(dbo.RecursiveStringNUM(WORK_PLAN.WORK_NUMBER),6) as int) ASC
                                                "/>
        <property name="tables">
            <map>
                <entry key="MAIN" value="PLAN_FACT_NIOKR"/>
                <entry key="WORK_PLAN" value="WORK_PLAN"/>
                <entry key="SERV_CONTRACT_STAGE" value="SERV_CONTRACT_STAGE"/>
                <entry key="CONTRACT" value="CONTRACT"/>
                <entry key="OCP" value="OCP"/>
                <entry key="ORDER_D" value="ORDER_D"/>
                <entry key="DEPART" value="DEPART"/>
                <entry key="COMPANY" value="COMPANY"/>
            </map>
        </property>
        <property name="tableJoins">
            <list>
                <bean class="pst.arm.client.modules.datagrid.domain.DTableJoin">
                    <property name="tableOne" value="MAIN"/>
                    <property name="tableTwo" value="WORK_PLAN"/>
                    <property name="relationType" value="INNER"/>
                    <property name="columnJoins">
                        <list>
                            <bean class="pst.arm.client.modules.datagrid.domain.DColumnJoin">
                                <property name="columnNameTableOne" value="WORK_PLAN_ID"/>
                                <property name="columnNameTableTwo" value="WORK_PLAN_ID"/>
                                <property name="columnRelationType" value="AND"/>
                            </bean>
                        </list>
                    </property>
                </bean>
                <bean class="pst.arm.client.modules.datagrid.domain.DTableJoin">
                    <property name="tableOne" value="WORK_PLAN"/>
                    <property name="tableTwo" value="SERV_CONTRACT_STAGE"/>
                    <property name="relationType" value="INNER"/>
                    <property name="columnJoins">
                        <list>
                            <bean class="pst.arm.client.modules.datagrid.domain.DColumnJoin">
                                <property name="columnNameTableOne" value="CONTRACT_STAGE_ID"/>
                                <property name="columnNameTableTwo" value="CONTRACT_STAGE_ID"/>
                                <property name="columnRelationType" value="AND"/>
                            </bean>
                        </list>
                    </property>
                </bean>
                <bean class="pst.arm.client.modules.datagrid.domain.DTableJoin">
                    <property name="tableOne" value="SERV_CONTRACT_STAGE"/>
                    <property name="tableTwo" value="CONTRACT"/>
                    <property name="relationType" value="LEFT"/>
                    <property name="columnJoins">
                        <list>
                            <bean class="pst.arm.client.modules.datagrid.domain.DColumnJoin">
                                <property name="columnNameTableOne" value="CONTRACT_ID"/>
                                <property name="columnNameTableTwo" value="CONTRACT_ID"/>
                                <property name="columnRelationType" value="AND"/>
                            </bean>
                        </list>
                    </property>
                </bean>
                <bean class="pst.arm.client.modules.datagrid.domain.DTableJoin">
                    <property name="tableOne" value="SERV_CONTRACT_STAGE"/>
                    <property name="tableTwo" value="OCP"/>
                    <property name="relationType" value="INNER"/>
                    <property name="columnJoins">
                        <list>
                            <bean class="pst.arm.client.modules.datagrid.domain.DColumnJoin">
                                <property name="columnNameTableOne" value="OCP_ID"/>
                                <property name="columnNameTableTwo" value="OCP_ID"/>
                                <property name="columnRelationType" value="AND"/>
                            </bean>
                        </list>
                    </property>
                </bean>
                <bean class="pst.arm.client.modules.datagrid.domain.DTableJoin">
                    <property name="tableOne" value="OCP"/>
                    <property name="tableTwo" value="ORDER_D"/>
                    <property name="relationType" value="INNER"/>
                    <property name="columnJoins">
                        <list>
                            <bean class="pst.arm.client.modules.datagrid.domain.DColumnJoin">
                                <property name="columnNameTableOne" value="ORDER_ID"/>
                                <property name="columnNameTableTwo" value="ORDER_ID"/>
                                <property name="columnRelationType" value="AND"/>
                            </bean>
                        </list>
                    </property>
                </bean>
                <bean class="pst.arm.client.modules.datagrid.domain.DTableJoin">
                    <property name="tableOne" value="WORK_PLAN"/>
                    <property name="tableTwo" value="DEPART"/>
                    <property name="relationType" value="INNER"/>
                    <property name="columnJoins">
                        <list>
                            <bean class="pst.arm.client.modules.datagrid.domain.DColumnJoin">
                                <property name="columnNameTableOne" value="DEPART_ID"/>
                                <property name="columnNameTableTwo" value="DEPART_ID"/>
                                <property name="columnRelationType" value="AND"/>
                            </bean>
                        </list>
                    </property>
                </bean>
                <bean class="pst.arm.client.modules.datagrid.domain.DTableJoin">
                    <property name="tableOne" value="DEPART"/>
                    <property name="tableTwo" value="COMPANY"/>
                    <property name="relationType" value="LEFT"/>
                    <property name="columnJoins">
                        <list>
                            <bean class="pst.arm.client.modules.datagrid.domain.DColumnJoin">
                                <property name="columnNameTableOne" value="COMPANY_ID"/>
                                <property name="columnNameTableTwo" value="COMPANY_ID"/>
                                <property name="columnRelationType" value="AND"/>
                            </bean>
                        </list>
                    </property>
                </bean>
            </list>
        </property>
        <property name="subTables">
            <list>
                <bean class="pst.arm.client.modules.datagrid.domain.SRelationInfo">
                    <property name="queryName" value="DEPART_EXECUTOR_FACT_PLAN_NTO_YEAR"/>
                    <property name="caption" value="Отметки о выполнении"/>
                    <property name="passedFieds">
                        <map>
                            <entry>
                                <key>
                                    <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                                        <property name="columnName" value="PLAN_LABOUR"/>
                                        <property name="tableAlias" value="MAIN"/>
                                    </bean>
                                </key>
                                <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                                    <property name="columnName" value="FACT_LABOUR"/>
                                    <property name="tableAlias" value="MAIN"/>
                                </bean>
                            </entry>
                            <entry>
                                <key>
                                    <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                                        <property name="columnName" value="PLAN_COST"/>
                                        <property name="tableAlias" value="MAIN"/>
                                    </bean>
                                </key>
                                <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                                    <property name="columnName" value="FACT_COST"/>
                                    <property name="tableAlias" value="MAIN"/>
                                </bean>
                            </entry>
                            <entry>
                                <key>
                                    <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                                        <property name="columnName" value="PLAN_LABOUR_DOP"/>
                                        <property name="tableAlias" value="WORK_PLAN"/>
                                    </bean>
                                </key>
                                <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                                    <property name="columnName" value="PLAN_LABOUR"/>
                                    <property name="tableAlias" value="WORK_PLAN"/>
                                </bean>
                            </entry>
                            <entry>
                                <key>
                                    <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                                        <property name="columnName" value="PLAN_COST_DOP"/>
                                        <property name="tableAlias" value="WORK_PLAN"/>
                                    </bean>
                                </key>
                                <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                                    <property name="columnName" value="PLAN_COST"/>
                                    <property name="tableAlias" value="WORK_PLAN"/>
                                </bean>
                            </entry>
                            <entry>
                                <key>
                                    <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                                        <property name="columnName" value="END_DATE"/>
                                        <property name="tableAlias" value="MAIN"/>
                                    </bean>
                                </key>
                                <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                                    <property name="columnName" value="END_DATE"/>
                                    <property name="tableAlias" value="MAIN"/>
                                </bean>
                            </entry>
                        </map>
                    </property>
                    <property name="relations">
                        <map>
                            <entry>
                                <key>
                                    <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                                        <property name="columnName" value="DEP_EX_PLAN_ID"/>
                                        <property name="tableAlias" value="MAIN"/>
                                    </bean>
                                </key>
                                <bean class="pst.arm.client.modules.datagrid.domain.SKeyForColumn">
                                    <property name="columnName" value="DEP_EX_PLAN_ID"/>
                                    <property name="tableAlias" value="MAIN"/>
                                </bean>
                            </entry>
                        </map>
                    </property>
                </bean>
            </list>
        </property>
        <property name="caption" value="Планы НТО на год"/>
        <property name="helpManual" value="plan_nto.pdf"/>
        <property name="queryName" value="PLAN_NTO_YEAR_VO"/>
        <property name="countRowsInFiltrColumn" value="4"/>
        <property name="isFiltrShow" value="true"/>
        <property name="isShowReport" value="false"/>
    </bean>






</beans>